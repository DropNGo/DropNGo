'use strict';mix_d("CCMPKahunaUICards__kahuna-music-desktop-shoveler:kahuna-music-desktop-shoveler__0YknBhTT","exports tslib @c/aui-carousel @c/remote-operations @c/scoped-dom @c/aui-utils @c/dom @p/A @p/a-carousel-framework @c/logger @c/browser-operations @c/weblabs".split(" "),function(D,r,I,J,K,L,M,N,O,P,Q,R){function n(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}function S(a){return function(b){var c=null===b||void 0===b?void 0:b.target,d=null===c||void 0===c?void 0:c.querySelector("#trigger-data");
c=null===d||void 0===d?void 0:d.getAttribute("data-weblab-name");d=null===d||void 0===d?void 0:d.getAttribute("data-weblab-treatment");if(c&&d)try{T["default"].trigger(c,d)}catch(l){}a(b)}}function U(a){var b=V["default"].setup().define;b(y.onHoverOverlayHandler,"mouseenter",S(W(a)));b(y.onHoverOverlayHandler,"mouseleave",X());b(y.followButtonToggleHandler,"click",Y(a))}function W(a){return function(b){var c,d,l,h;if(b=null===(c=null===b||void 0===b?void 0:b.target)||void 0===c?void 0:c.querySelector("."+
p.squareOverlay)){c=null===b||void 0===b?void 0:b.querySelector(".a-button-input");var e=null===b||void 0===b?void 0:b.querySelector("."+p.overlaySpinner),k=null===(d=null===b||void 0===b?void 0:b.querySelector("#ic_action_favorite-a"))||void 0===d?void 0:d.closest("."+p.followIcon),f=null===(l=null===b||void 0===b?void 0:b.querySelector("#ic_action_favoriteon-a"))||void 0===l?void 0:l.closest("."+p.followIcon);t(b);w(e)||a.getIntentStatuses({ids:[null!==(h=null===c||void 0===c?void 0:c.getAttribute("data-mrn"))&&
void 0!==h?h:""],intentType:"FOLLOW"}).then(function(q){E(q.at(0));u(e);t(f)}).catch(function(q){u(e);t(k)})}}}function X(){return function(a){var b;u(null===(b=null===a||void 0===a?void 0:a.target)||void 0===b?void 0:b.querySelector("."+p.squareOverlay))}}function Y(a){return function(b){var c,d,l;b=null===(c=null===b||void 0===b?void 0:b.target)||void 0===c?void 0:c.closest(".a-button");c=null===b||void 0===b?void 0:b.querySelector(".a-button-input");var h=null===b||void 0===b?void 0:b.querySelector("."+
p.overlaySpinner),e=null===b||void 0===b?void 0:b.querySelector("."+p.followIcon+":not(.aok-hidden)"),k=null===b||void 0===b?void 0:b.querySelector("."+p.followIcon+".aok-hidden");w(h)&&(u(e),t(h),a.enactIntent({intentType:null!==(d=null===e||void 0===e?void 0:e.getAttribute("data-intent"))&&void 0!==d?d:"",id:null!==(l=null===c||void 0===c?void 0:c.getAttribute("data-mrn"))&&void 0!==l?l:""}).then(function(f){E(f);u(h);t(k)}).catch(function(f){u(h);t(e)}))}}function t(a){var b;w(a)&&(null===(b=null===
a||void 0===a?void 0:a.classList)||void 0===b?void 0:b.remove("aok-hidden"))}function u(a){var b;w(a)||(null===(b=null===a||void 0===a?void 0:a.classList)||void 0===b?void 0:b.add("aok-hidden"))}function w(a){var b,c;return null!==(c=null===(b=null===a||void 0===a?void 0:a.classList)||void 0===b?void 0:b.contains("aok-hidden"))&&void 0!==c?c:!1}function E(a){if("ENACTED_FULFILLED"!=(null===a||void 0===a?void 0:a.status)&&"ENACTED_FIRED_AND_FORGOT"!=(null===a||void 0===a?void 0:a.status))throw Error("Intent not fulfilled");
}function Z(){var a=z["default"].cardRoot.classList.contains("a-carousel-container")?z["default"].cardRoot:z["default"].cardRoot.getElementsByClassName("a-carousel-container")[0];return{carousel:aa["default"].getCarousel(a),carouselName:ba["default"].getCarousel(M.unscope(a)).getAttr("name"),ajaxOperations:ca["default"].setup(["getCarouselItems","enactIntent","getIntentStatuses"]),ajaxParams:a.dataset||{},productRefreshHandler:function(){L.loadDynamicImage(a.getElementsByClassName("a-dynamic-image"));
da(a)}}}var aa=n(I),ca=n(J),z=n(K),A=n(N),ba=n(O),B=n(P),V=n(Q),T=n(R),F=/(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/,G=/[^\/\-\[\]():\s]/,ea=function(a){var b=A["default"].$("<div>")[0];b.classList.add("p13n-sc-offscreen-truncate");var c=parseInt(a.getAttribute("data-rows")||"2",10),d=function(){var e=a.innerHTML;a.innerHTML="&hellip;";var k=a.clientHeight;a.innerHTML=
e;return k}();if(c){if(d){var l=function(e){b.innerHTML=e;return Math.round(b.clientHeight/d)<=c},h=function(e,k){e=e.split(k);var f=Math.floor(a.clientWidth/12),q=function(g){b.classList.add("p13n-sc-offscreen-truncate");b.style.overflow="hidden";b.textContent=g;a.appendChild(b);g=a.clientWidth>=a.scrollWidth;a.removeChild(b);return g},v=function(g){var x=g.length-f;g.trim().length>f&&!q(g)&&Array.prototype.slice.call(g).map(function(m,H){return H>f&&H<=x&&G.test(m)?"&shy;"+m:m});return g};return e.map(function(g){return v(g)}).join("")};
return{truncate:function(){var e=a.innerHTML.trim(),k=a.textContent||"";e=h(e,F);a.appendChild(b);if(l(e))a.removeChild(b),a.innerHTML=e;else{var f=e.split(F);for(var q=1,v=f.length,g,x,m=0;q!==v;)if(g=Math.floor((v+q)/2),x=f.slice(0,g).join("")+"&hellip;",l(x)){if(1>=v-g){for(m=g;0<m&&!G.test(f[m-1]);)m--;break}q=g}else v=g;f=0===m?void 0:f.slice(0,m).join("")+"&hellip;";f?(a.innerHTML=f,a.setAttribute("title",k),a.setAttribute("aria-label",k)):(B["default"].log("Unable to successfully truncate line "+
e,"ERROR"),a.removeChild(b))}}}}B["default"].log("Truncation element does not have a line height or it is zero","ERROR")}else B["default"].log("Truncation element missing necessary line number data","ERROR")},da=function(a){var b=Array.prototype.slice.call(a.getElementsByClassName("p13n-sc-truncate"));a=a.getElementsByClassName("p13n-sc-truncate-fallback");(CSS&&CSS.supports&&CSS.supports("-webkit-line-clamp","1")?b:b.concat(Array.prototype.slice.call(a))).filter(function(c){return!!c.offsetParent}).map(function(c){var d=
ea(c);d&&(d.truncate(),c.classList.add("p13n-sc-truncated"),c.classList.remove("p13n-sc-truncate"),c.classList.remove("p13n-sc-truncate-fallback"),c.className=c.className.replace(/p13n-sc-line-clamp-\d/g,""))})},C;(function(a){a.onHoverOverlayHandler="onHoverOverlayHandler";a.followButtonToggleHandler="followButtonToggleHandler"})(C||(C={}));var y=C,p={overlayParent:"_a2Fod_overlayParent_c2EEg",squareOverlay:"_a2Fod_squareOverlay_2YRGU",overlayButton:"_a2Fod_overlayButton_3PchG",followIcon:"_a2Fod_followIcon_1tyhv",
overlayText:"_a2Fod_overlayText_1yGyR",overlaySpinner:"_a2Fod_overlaySpinner_3lE7H"},fa=function(){return r.__awaiter(void 0,void 0,void 0,function(){var a,b,c,d,l,h;return r.__generator(this,function(e){switch(e.label){case 0:return a=Z(),b=a.carousel,c=a.carouselName,d=a.ajaxOperations,l=a.ajaxParams,h=a.productRefreshHandler,[4,b.initialized];case 1:return e.sent(),U(d),b.on("change:fetchedItems",h),A["default"].on("a:carousel:"+c+":change:loading",h),A["default"].on("a:carousel:"+c+":change:animating",
h),b.attachRemoteOperation(function(k){var f=k.indexes;k=k.ids;return d.getCarouselItems(r.__assign(r.__assign({},l),{ids:k,indexes:f}))}),[2]}})})};D._operationNames=["getCarouselItems","enactIntent","getIntentStatuses"];D.card=function(){return r.__awaiter(void 0,void 0,void 0,function(){return r.__generator(this,function(a){switch(a.label){case 0:return[4,fa()];case 1:return a.sent(),[2]}})})}});
