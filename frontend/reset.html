<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Passwort zur√ºcksetzen ‚Äì DropNGo</title>
  <link rel="icon" href="/favicon.ico"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0d0f; --surface:#121417; --elev:#191c20;
      --text:#e6e9ee; --muted:#aab3be;
      --brand:#18a196; --brand-700:#0e9d90;
      --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.35);
    }

    /* Base */
    *,*::before,*::after{ box-sizing:border-box }
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 70% -10%, rgba(24,161,150,.08), transparent 60%),
        radial-gradient(900px 600px at 0% 100%, rgba(24,161,150,.06), transparent 60%),
        var(--bg);
      line-height:1.6;
    }
    a{ color:inherit; text-decoration:none }
    .container{ width:min(1100px,92%); margin-inline:auto }

    /* Header (wie auf index) */
    .site-header{
      position:sticky; top:0; z-index:50;
      backdrop-filter:saturate(160%) blur(10px);
      background:rgba(11,13,15,.75);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .nav{ display:flex; align-items:center; justify-content:space-between; padding:14px 0; gap:14px }
    .brand{ display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px }
    .brand img{ width:34px; height:34px; border-radius:10px; box-shadow:0 6px 18px rgba(24,161,150,.30) }
    .nav__links{ display:flex; gap:18px; align-items:center }
    .nav__links a{ padding:8px 12px; border-radius:10px; color:var(--muted); transition:.2s }
    .nav__links a:hover{ color:var(--text); background:rgba(255,255,255,.05) }
    .nav__cta{ display:flex; gap:10px }
    .btn{
      padding:10px 14px; border-radius:12px; border:1px solid transparent;
      background:var(--brand); color:#041413; font-weight:800; cursor:pointer;
      box-shadow:0 8px 18px rgba(24,161,150,.25); transition:.2s background,.08s transform;
    }
    .btn:hover{ background:var(--brand-700) }
    .btn--ghost{ background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.12); box-shadow:none }
    .btn--ghost:hover{ background:rgba(255,255,255,.06) }

    /* Mobile-Header */
    .nav-toggle{ display:none; background:transparent; border:1px solid rgba(255,255,255,.14); padding:10px; border-radius:10px; color:var(--text) }
    .nav-toggle svg{ width:22px; height:22px }
    @media (max-width:820px){
      .nav__links,.nav__cta{ display:none }
      .nav-toggle{ display:block }
      .mobile-menu{ display:none; position:fixed; inset:64px 0 0 0; background:rgba(9,11,12,.98); border-top:1px solid rgba(255,255,255,.06); padding:18px 0 }
      .mobile-menu[hidden]{ display:none }
      .mobile-menu nav{ display:grid; gap:8px }
      .mobile-menu a{ padding:12px 10px; border-radius:10px; color:var(--muted) }
      .mobile-menu a:hover{ background:rgba(255,255,255,.05); color:var(--text) }
      .mobile-cta{ display:grid; gap:10px; margin-top:12px }
    }

    /* Page Hero */
    .page-hero{ padding: clamp(26px, 4vw, 40px) 0 8px }
    .page-hero h1{ margin:0 0 6px; font-size: clamp(28px, 4.5vw, 42px); line-height:1.1 }
    .page-hero p{ color:var(--muted); margin:0 }

    /* Card */
    .card{
      margin:16px 0 clamp(40px,6vw,70px);
      background:linear-gradient(180deg,var(--surface),var(--elev));
      border:1px solid rgba(255,255,255,.06);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding: clamp(18px, 3vw, 26px);
    }

    /* Form */
    .grid{ display:grid; gap:12px }
    label{ font-weight:700 }
    .field{ position:relative }
    input[type="password"]{
      width:100%; padding:12px 42px 12px 12px;
      border-radius:10px; border:1px solid rgba(255,255,255,.12);
      background:#0f1114; color:var(--text);
    }
    .toggle{
      position:absolute; right:8px; top:50%; transform:translateY(-50%);
      background:transparent; border:0; color:#aab3be; padding:6px; border-radius:8px; cursor:pointer
    }
    .toggle:hover{ color:#e6e9ee; background:rgba(255,255,255,.05) }

    /* St√§rke-Meter + Hinweise */
    .meter{ height:8px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden }
    .meter > span{ display:block; height:100%; width:0%; background:#18a196; transition:width .25s ease }
    .hints{ display:grid; gap:6px; color:var(--muted); font-size:.95rem }
    .hints li{ list-style:none; display:flex; gap:8px; align-items:center }
    .dot{ width:8px; height:8px; border-radius:50%; background:#18a196; opacity:.7 }

    /* Alerts */
    .alert{
      display:none; margin-top:10px; padding:10px 12px; border-radius:10px;
      border:1px solid rgba(255,255,255,.12)
    }
    .alert--ok{ display:block; background:rgba(24,161,150,.10); color:#bdf3ec; border-color:rgba(24,161,150,.35) }
    .alert--warn{ display:block; background:rgba(220,75,75,.10); color:#ffd5d5; border-color:rgba(220,75,75,.35) }
    .muted{ color:var(--muted) }

    /* Footer-light */
    footer{ padding:30px 0 50px; color:#8f98a3; border-top:1px solid rgba(255,255,255,.06); margin-top:50px; text-align:center }
  </style>
</head>
<body>

  <!-- ===== Global Header (neu) ===== -->
<header class="dng-header" data-mobile>
  <div class="dng-container dng-nav">
    <a class="dng-brand" href="index.html" aria-label="DropNGo Startseite">
      <img src="favicon.ico" alt="" class="dng-logo">
      <span class="dng-brand-text">DropNGo</span>
    </a>

    <!-- Desktop-Links -->
    <nav class="dng-links" aria-label="Hauptnavigation">
      <a href="index.html">Home</a>
      <a href="products.html">Produkte</a>
      <a href="info.html">√úber uns</a>
      <a href="support-formular.html">Support</a>
      <a href="account.html" class="dng-account">Mein Konto</a>
    </nav>

    <!-- Burger -->
    <button id="dngNavToggle" class="dng-burger" aria-expanded="false" aria-controls="dngMobileMenu" aria-label="Men√º √∂ffnen">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </div>
</header>

<!-- ===== Mobile Drawer + Overlay (neu) ===== -->
<div id="dngOverlay" class="dng-overlay" hidden></div>

<aside id="dngMobileMenu" class="dng-drawer" hidden aria-label="Mobile Navigation">
  <nav class="dng-drawer-nav">
    <a href="index.html">Home</a>
    <a href="products.html">Produkte</a>
    <a href="info.html">√úber uns</a>
    <a href="support-formular.html">Support</a>
    <a href="account.html">Mein Konto</a>
  </nav>
</aside>

  <!-- Main -->
  <main class="container">
    <section class="page-hero">
      <h1>Passwort zur√ºcksetzen</h1>
      <p class="muted">Vergib ein neues, sicheres Passwort f√ºr dein Konto.</p>
    </section>

    <section class="card" aria-labelledby="reset-head">
      <h2 id="reset-head" style="margin:0 0 6px; font-size:1.15rem; color:#d7dde6">Neues Passwort</h2>

      <div class="grid" style="max-width:560px">
        <div class="field">
          <label for="pw1">Neues Passwort</label>
          <input id="pw1" type="password" autocomplete="new-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
          <button class="toggle" type="button" data-target="pw1" aria-label="Passwort anzeigen/ausblenden">üëÅÔ∏è</button>
        </div>

        <div class="field">
          <label for="pw2">Passwort best√§tigen</label>
          <input id="pw2" type="password" autocomplete="new-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
          <button class="toggle" type="button" data-target="pw2" aria-label="Passwort anzeigen/ausblenden">üëÅÔ∏è</button>
        </div>

        <div class="meter" aria-hidden="true"><span id="bar"></span></div>
        <ul class="hints" aria-live="polite" id="reqList">
          <li><span class="dot"></span> Mindestens 8 Zeichen</li>
          <li><span class="dot"></span> Zahlen & Buchstaben gemischt</li>
          <li><span class="dot"></span> Optional: Sonderzeichen f√ºr extra St√§rke</li>
          <li id="capsHint" style="display:none"><span class="dot" style="background:#f5b83d"></span> Feststelltaste ist aktiv</li>
        </ul>

        <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:6px">
          <button id="saveBtn" class="btn">Speichern</button>
          <a class="btn btn--ghost" href="login.html" style="text-decoration:none">Zur Anmeldung</a>
        </div>

        <div id="msg" class="alert" role="status" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">¬© 2025 DropNGo ‚Äì Sicher, fair & transparent.</div>
  </footer>

  <!-- Keys (liefert window.SUPABASE_URL / window.SUPABASE_ANON) -->
  <script src="auth-config.js"></script>

  <!-- Mobile-Menu Toggle -->
  

  <!-- Reset-Logik -->
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm'

    const supabase = createClient(window.SUPABASE_URL, window.SUPABASE_ANON);

    const pw1 = document.getElementById('pw1');
    const pw2 = document.getElementById('pw2');
    const msg = document.getElementById('msg');
    const bar = document.getElementById('bar');
    const capsHint = document.getElementById('capsHint');

    // Augen-Toggles
    document.querySelectorAll('.toggle').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-target');
        const input = document.getElementById(id);
        input.type = input.type === 'password' ? 'text' : 'password';
      });
    });

    // Caps-Lock Hinweis
    [pw1, pw2].forEach(el=>{
      el.addEventListener('keyup', e=>{
        capsHint.style.display = e.getModifierState && e.getModifierState('CapsLock') ? 'block' : 'none';
      });
    });

    // St√§rke-Sch√§tzung (basic)
    function strength(v){
      let s = 0;
      if(v.length >= 8) s += 30;
      if(/[A-Z]/.test(v) && /[a-z]/.test(v)) s += 25;
      if(/\d/.test(v)) s += 25;
      if(/[^\w\s]/.test(v)) s += 20;
      return Math.min(100, s);
    }
    pw1.addEventListener('input', ()=>{
      const val = pw1.value;
      const pct = strength(val);
      bar.style.width = pct + '%';
      bar.style.background = pct < 40 ? '#d95c5c' : pct < 70 ? '#f5b83d' : '#18a196';
    });

    // Submit
    async function save(){
      msg.className = 'alert'; msg.style.display = 'none'; msg.textContent = '';
      if(pw1.value !== pw2.value){
        msg.classList.add('alert--warn'); msg.style.display='block';
        msg.textContent = 'Passw√∂rter stimmen nicht √ºberein.'; return;
      }
      if(pw1.value.length < 8){
        msg.classList.add('alert--warn'); msg.style.display='block';
        msg.textContent = 'Bitte mindestens 8 Zeichen w√§hlen.'; return;
      }
      const { error } = await supabase.auth.updateUser({ password: pw1.value });
      if(error){
        msg.classList.add('alert--warn'); msg.style.display='block';
        msg.textContent = 'Fehler: ' + error.message; return;
      }
      msg.classList.add('alert--ok'); msg.style.display='block';
      msg.textContent = 'Dein Passwort wurde gespeichert. Du kannst dich jetzt anmelden.';
      setTimeout(()=>{ location.href = 'login.html'; }, 1400);
    }

    document.getElementById('saveBtn').addEventListener('click', save);
    // Enter-Submit
    [pw1,pw2].forEach(i => i.addEventListener('keydown', e => { if(e.key==='Enter'){ e.preventDefault(); save(); } }));
    // Fokus
    pw1.focus();
  </script>
    <script src="auth-config.js"></script>               <!-- falls ben√∂tigt -->

  
</style>
<link rel="stylesheet" href="mobile.css">
<script src="mobile.js" defer></script>

</body>
</html>
